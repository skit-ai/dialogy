<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="dialogy.types package" href="dialogy.types.html" /><link rel="prev" title="dialogy.plugins.text.slot_filler package" href="dialogy.plugins.text.slot_filler.html" />

    <meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.beta34"/>
        <title>dialogy.plugins.text.voting package - dialogy 0.8.7a1 documentation</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">dialogy 0.8.7a1 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">dialogy 0.8.7a1 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="dialogy.base.html">dialogy.base package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.cli.html">dialogy.cli package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.constants.html">dialogy.constants package</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="dialogy.plugins.html">dialogy.plugins package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="dialogy.plugins.text.html">dialogy.plugins.text package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.calibration.html">dialogy.plugins.text.calibration package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.canonicalization.html">dialogy.plugins.text.canonicalization package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.classification.html">dialogy.plugins.text.classification package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.duckling_plugin.html">dialogy.plugins.text.duckling_plugin package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.lb_plugin.html">dialogy.plugins.text.lb_plugin package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.list_entity_plugin.html">dialogy.plugins.text.list_entity_plugin package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.merge_asr_output.html">dialogy.plugins.text.merge_asr_output package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.slot_filler.html">dialogy.plugins.text.slot_filler package</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">dialogy.plugins.text.voting package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="dialogy.plugins.text.html">dialogy.plugins.text package</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.calibration.html">dialogy.plugins.text.calibration package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.canonicalization.html">dialogy.plugins.text.canonicalization package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.classification.html">dialogy.plugins.text.classification package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.duckling_plugin.html">dialogy.plugins.text.duckling_plugin package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.lb_plugin.html">dialogy.plugins.text.lb_plugin package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.list_entity_plugin.html">dialogy.plugins.text.list_entity_plugin package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.merge_asr_output.html">dialogy.plugins.text.merge_asr_output package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.slot_filler.html">dialogy.plugins.text.slot_filler package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">dialogy.plugins.text.voting package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.calibration.html">dialogy.plugins.text.calibration package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.canonicalization.html">dialogy.plugins.text.canonicalization package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.classification.html">dialogy.plugins.text.classification package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.duckling_plugin.html">dialogy.plugins.text.duckling_plugin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.lb_plugin.html">dialogy.plugins.text.lb_plugin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.list_entity_plugin.html">dialogy.plugins.text.list_entity_plugin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.merge_asr_output.html">dialogy.plugins.text.merge_asr_output package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.slot_filler.html">dialogy.plugins.text.slot_filler package</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">dialogy.plugins.text.voting package</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="dialogy.types.html">dialogy.types package</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.entity.html">dialogy.types.entity package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.intent.html">dialogy.types.intent package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.plugin.html">dialogy.types.plugin package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.signal.html">dialogy.types.signal package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.slots.html">dialogy.types.slots package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.utterances.html">dialogy.types.utterances package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.entity.html">dialogy.types.entity package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.intent.html">dialogy.types.intent package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.plugin.html">dialogy.types.plugin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.signal.html">dialogy.types.signal package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.slots.html">dialogy.types.slots package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.utterances.html">dialogy.types.utterances package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.utils.html">dialogy.utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.workflow.html">dialogy.workflow package</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="dialogy-plugins-text-voting-package">
<h1>dialogy.plugins.text.voting package<a class="headerlink" href="#dialogy-plugins-text-voting-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-dialogy.plugins.text.voting.intent_voting">
<span id="dialogy-plugins-text-voting-intent-voting-module"></span><h2>dialogy.plugins.text.voting.intent_voting module<a class="headerlink" href="#module-dialogy.plugins.text.voting.intent_voting" title="Permalink to this headline">¶</a></h2>
<p>This module provides utilities to handle multiple intents from each
alternative from the ASR.</p>
<dl class="py class">
<dt id="dialogy.plugins.text.voting.intent_voting.VotePlugin">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">dialogy.plugins.text.voting.intent_voting.</span></code><code class="sig-name descname"><span class="pre">VotePlugin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">access:</span> <span class="pre">Optional[Callable[[...],</span> <span class="pre">Any]]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">mutate:</span> <span class="pre">Optional[Callable[[...],</span> <span class="pre">Any]]</span> <span class="pre">=</span> <span class="pre">None,</span> <span class="pre">threshold:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">0.6,</span> <span class="pre">consensus:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">0.2,</span> <span class="pre">representation:</span> <span class="pre">float</span> <span class="pre">=</span> <span class="pre">0.3,</span> <span class="pre">fallback_intent:</span> <span class="pre">str</span> <span class="pre">=</span> <span class="pre">'_oos_',</span> <span class="pre">aggregate_fn:</span> <span class="pre">Any</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">mean&gt;,</span> <span class="pre">debug:</span> <span class="pre">bool</span> <span class="pre">=</span> <span class="pre">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dialogy/plugins/text/voting/intent_voting.html#VotePlugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.plugins.text.voting.intent_voting.VotePlugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="dialogy.base.html#dialogy.base.plugin.Plugin" title="dialogy.base.plugin.Plugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">dialogy.base.plugin.Plugin</span></code></a></p>
<p>An instance of VoteIntentPlugin helps in voting for a strong
evidence over other candidates.</p>
<p>This plugin takes into consideration a list of predictions (signals)
some of which can be strong, (decided by their confidence score for now)
and weak signals are filtered out. If there is a healthy vote proportion,
we will consider the winning signal as the true output.</p>
<p>This class handles signals which are produced by an intent classifier that
classifies a set of ASR alternatives (strings).</p>
<p>The voting algorithm here is naive as it is based on heuristics
and plain counting. This can be improved by using learned trees/forests.</p>
<p>Ideal design should provide the signals, their strengths (confidence) and
signal boosters, any contextual information that implies a weak signal has
more weight than its counterparts.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Use this with caution, this is not production ready yet.</p>
</div>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">dialogy.plugins</span> <span class="kn">import</span> <span class="n">VotePlugin</span>

<span class="gp">In [2]: </span><span class="kn">from</span> <span class="nn">dialogy.workflow</span> <span class="kn">import</span> <span class="n">Workflow</span>

<span class="gp">In [3]: </span><span class="kn">from</span> <span class="nn">dialogy.types</span> <span class="kn">import</span> <span class="n">Intent</span>

<span class="go"># Let's say we had a normalized set of alternatives that look like:</span>
<span class="gp">In [4]: </span><span class="n">transcripts</span> <span class="o">=</span> <span class="p">[</span>
<span class="gp">   ...: </span>    <span class="s2">"yes"</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s2">"yet"</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s2">"yep"</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s2">"ye"</span><span class="p">,</span>
<span class="gp">   ...: </span>    <span class="s2">"&lt;UNK&gt;"</span><span class="p">,</span> <span class="c1"># ASR's way of being under-confident about the token</span>
<span class="gp">   ...: </span>    <span class="s2">"no"</span> <span class="c1"># expected anomalies in SLU.</span>
<span class="gp">   ...: </span><span class="p">]</span>
<span class="gp">   ...: </span>

<span class="go"># We have noticed that concatenation of all the transcripts leads to a situation</span>
<span class="go"># where a model can't pick signals since there is only one, the one built by</span>
<span class="go"># concatenation of transcripts. So let's mock the intents for this and continue.</span>
<span class="gp">In [5]: </span><span class="n">intents</span> <span class="o">=</span> <span class="p">[</span><span class="n">Intent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"affirmative"</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mf">0.8</span><span class="p">),</span> <span class="n">Intent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"affirmative"</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mf">0.8</span><span class="p">),</span>
<span class="gp">   ...: </span>            <span class="n">Intent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"affirmative"</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mf">0.8</span><span class="p">),</span> <span class="n">Intent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"affirmative"</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mf">0.8</span><span class="p">),</span>
<span class="gp">   ...: </span>            <span class="n">Intent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"_oos_"</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mf">0.8</span><span class="p">),</span> <span class="n">Intent</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">"negative"</span><span class="p">,</span> <span class="n">score</span><span class="o">=</span><span class="mf">0.9</span><span class="p">)]</span>
<span class="gp">   ...: </span>

<span class="go"># This situation simulates a single very confident prediction, while the overall group representation</span>
<span class="go"># paints a different picture.</span>
<span class="go"># We need to define a function to let the plugin modify the workflow state.</span>
<span class="gp">In [6]: </span><span class="k">def</span> <span class="nf">update_intent</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">intent</span><span class="p">):</span>
<span class="gp">   ...: </span>    <span class="n">w</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">intent</span>
<span class="gp">   ...: </span><span class="n">vote_plugin</span> <span class="o">=</span> <span class="n">VotePlugin</span><span class="p">(</span><span class="n">access</span><span class="o">=</span><span class="k">lambda</span> <span class="n">w</span><span class="p">:</span> <span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span> <span class="n">mutate</span><span class="o">=</span><span class="n">update_intent</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">   ...: </span><span class="n">workflow</span> <span class="o">=</span> <span class="n">Workflow</span><span class="p">([</span><span class="n">vote_plugin</span><span class="p">])</span>
<span class="gp">   ...: </span><span class="n">workflow</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="n">intents</span>
<span class="gp">   ...: </span><span class="n">workflow</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">input_</span><span class="o">=</span><span class="p">(</span><span class="n">transcripts</span><span class="p">,))</span>
<span class="gp">   ...: </span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">[Intent(name=affirmative, score=0.8, slots={}),</span>
<span class="go"> Intent(name=affirmative, score=0.8, slots={}),</span>
<span class="go"> Intent(name=affirmative, score=0.8, slots={}),</span>
<span class="go"> Intent(name=affirmative, score=0.8, slots={}),</span>
<span class="go"> Intent(name=_oos_, score=0.8, slots={}),</span>
<span class="go"> Intent(name=negative, score=0.9, slots={})]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>access</strong> (<em>Optional</em><em>[</em><em>PluginFn</em><em>]</em>) – <p>A function that expects workflow as an argument and returns a Tuple.
The Tuple contains: <code class="code docutils literal notranslate"><span class="pre">intents</span></code>, <code class="code docutils literal notranslate"><span class="pre">trials</span></code>. Here,</p>
<ol class="arabic simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">intents</span></code> is a <code class="code docutils literal notranslate"><span class="pre">List[T]</span></code> where <code class="code docutils literal notranslate"><span class="pre">T</span></code> is an <a class="reference internal" href="dialogy.types.intent.html#intent"><span class="std std-ref">Intent</span></a>.</p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">trials</span></code> is an <code class="code docutils literal notranslate"><span class="pre">int</span></code> that tells us the number of observations that produced the <code class="code docutils literal notranslate"><span class="pre">intents</span></code>.</p></li>
</ol>
</p></li>
<li><p><strong>mutate</strong> (<em>Optional</em><em>[</em><em>PluginFn</em><em>]</em>) – A function that places the safest value from the list of <code class="code docutils literal notranslate"><span class="pre">intents</span></code> or <code class="code docutils literal notranslate"><span class="pre">fallback_intent</span></code>
in case nothing in the list is safe.</p></li>
<li><p><strong>threshold</strong> (<em>float</em>) – A threshold for confidence scores for each <a class="reference internal" href="dialogy.types.intent.html#intent"><span class="std std-ref">Intent</span></a>.</p></li>
<li><p><strong>consensus</strong> (<em>float</em>) – We rank each <a class="reference internal" href="dialogy.types.intent.html#intent"><span class="std std-ref">Intent</span></a> by confidence score, if the top two have similar and high
confidence scores, then it is a case of no-consensus. If the top two intents have considerable gap then there
is consensus. The <em>considerable gap</em> is defined by <code class="code docutils literal notranslate"><span class="pre">consensus</span></code>.</p></li>
<li><p><strong>representation</strong> (<em>float</em>) – A percentage that depicts how many votes did an <a class="reference internal" href="dialogy.types.intent.html#intent"><span class="std std-ref">Intent</span></a> receive. It is unsafe
if the confidence threshold is met but representation is poor.</p></li>
<li><p><strong>fallback_intent</strong> (<em>str</em>) – In case we fail to find a strong candidate, we resort to a <code class="code docutils literal notranslate"><span class="pre">fallback_intent</span></code>.</p></li>
<li><p><strong>aggregate_fn</strong> (<em>Any</em>) – A function that allows us to aggregate over confidence scores of each <a class="reference internal" href="dialogy.types.intent.html#intent"><span class="std std-ref">Intent</span></a>.</p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – log intermediates if True.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="dialogy.plugins.text.voting.intent_voting.VotePlugin.utility">
<code class="sig-name descname"><span class="pre">utility</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> → <span class="pre">Any</span><a class="reference internal" href="../_modules/dialogy/plugins/text/voting/intent_voting.html#VotePlugin.utility"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.plugins.text.voting.intent_voting.VotePlugin.utility" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform X -&gt; y.</p>
<p>This method is called during a <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">Workflow</span></a> run.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A value that will be passed to the next plugin (if any).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="dialogy.plugins.text.voting.intent_voting.VotePlugin.vote_signal">
<code class="sig-name descname"><span class="pre">vote_signal</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">intents</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="dialogy.types.intent.html#dialogy.types.intent.Intent" title="dialogy.types.intent.Intent"><span class="pre">dialogy.types.intent.Intent</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trials</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> → <a class="reference internal" href="dialogy.types.intent.html#dialogy.types.intent.Intent" title="dialogy.types.intent.Intent"><span class="pre">dialogy.types.intent.Intent</span></a><a class="reference internal" href="../_modules/dialogy/plugins/text/voting/intent_voting.html#VotePlugin.vote_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.plugins.text.voting.intent_voting.VotePlugin.vote_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce a list of intents.</p>
<p>This is a naive voting algorithm. We filter intents with high confidence.
Count the frequency of the remaining intents. If the proportion of votes
goes beyond the expected constituency, then the intent is elected else
a fallback intent is emitted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>intents</strong> (<em>List</em><em>[</em><a class="reference internal" href="dialogy.types.intent.html#dialogy.types.intent.Intent" title="dialogy.types.intent.Intent"><em>Intent</em></a><em>]</em>) – A list of predictions over ASR output. (size ~ 1-10)</p></li>
<li><p><strong>trials</strong> (<em>int</em>) – Number of observations over which the set of intents is obtained.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Voted signal or fallback in case of no consensus.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="dialogy.types.intent.html#dialogy.types.intent.Intent" title="dialogy.types.intent.Intent">Intent</a></p>
</dd>
</dl>
</dd></dl>
</dd></dl>
<dl class="py function">
<dt id="dialogy.plugins.text.voting.intent_voting.adjust_signal_strength">
<code class="sig-prename descclassname"><span class="pre">dialogy.plugins.text.voting.intent_voting.</span></code><code class="sig-name descname"><span class="pre">adjust_signal_strength</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="pre">signals:</span> <span class="pre">List[Tuple[str,</span> <span class="pre">float,</span> <span class="pre">float]],</span> <span class="pre">trials:</span> <span class="pre">int,</span> <span class="pre">aggregate_fn:</span> <span class="pre">Any</span> <span class="pre">=</span> <span class="pre">&lt;function</span> <span class="pre">mean&gt;</span></em><span class="sig-paren">)</span> → <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/dialogy/plugins/text/voting/intent_voting.html#adjust_signal_strength"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.plugins.text.voting.intent_voting.adjust_signal_strength" title="Permalink to this definition">¶</a></dt>
<dd><p>Re-evaluate signal strength.</p>
<p>Re-evaluation is based on frequency of occurrence and strength of each occurrence,
normalized by trials.</p>
<p>Here trials are total attempts made to generate signals.
- Worst case could be, each attempt yields a unique signal. In this case the signal strength is dampened.
- Best case, each attempt yields a single signal. In this case the signal strength is boosted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>signals</strong> (<em>List</em><em>[</em><em>Signal</em><em>]</em>) – A signal is a tuple of name and strength.</p></li>
<li><p><strong>trials</strong> (<em>int</em>) – Total attempts made to generate signals.</p></li>
<li><p><strong>aggregate_fn</strong> (<em>Any</em><em>, </em><em>optional</em>) – A function to normalize a list of floating point values, defaults to np.mean</p></li>
<li><p><strong>debug</strong> (<em>bool</em>) – Log if True.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>TypeError</strong> – <code class="code docutils literal notranslate"><span class="pre">aggregate_fn</span></code> if passed should be a <code class="code docutils literal notranslate"><span class="pre">callable</span></code>.</p>
</dd>
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of normalized signal.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>List[Signal]</p>
</dd>
</dl>
</dd></dl>
</div>
<div class="section" id="module-dialogy.plugins.text.voting">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-dialogy.plugins.text.voting" title="Permalink to this headline">¶</a></h2>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="dialogy.types.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">dialogy.types package</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="dialogy.plugins.text.slot_filler.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">dialogy.plugins.text.slot_filler package</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/source/dialogy.plugins.text.voting.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">dialogy.plugins.text.voting package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-dialogy.plugins.text.voting.intent_voting">dialogy.plugins.text.voting.intent_voting module</a></li>
<li><a class="reference internal" href="#module-dialogy.plugins.text.voting">Module contents</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>