<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="dialogy.cli package" href="dialogy.cli.html" /><link rel="prev" title="Dialogy" href="../index.html" />

    <meta name="generator" content="sphinx-3.5.4, furo 2021.04.11.beta34"/>
        <title>dialogy.base package - dialogy 0.8.4 documentation</title>
      <link rel="stylesheet" href="../_static/styles/furo.css?digest=59ab60ac09ea94ccfe6deddff6d715cce948a6fc">
    <link rel="stylesheet" href="../_static/pygments.css">
    <link media="(prefers-color-scheme: dark)" rel="stylesheet" href="../_static/pygments_dark.css">
    


<style>
  :root {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media (prefers-color-scheme: dark) {
    :root {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }

  /* For allowing end-user-specific overrides */
  .override-light {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  .override-dark {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
</style><link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" href="../_static/styles/furo-extensions.css?digest=d391b54134226e4196576da3bdb6dddb7e05ba2b"></head>
  <body dir="">
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke-width="1.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z"/>
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
      stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="feather feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">dialogy 0.8.4 documentation</div></a>
    </div>
    <div class="header-right">
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">dialogy 0.8.4 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html">
  <input class="sidebar-search" placeholder=Search name="q">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">dialogy.base package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.cli.html">dialogy.cli package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.constants.html">dialogy.constants package</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="dialogy.plugins.html">dialogy.plugins package</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="dialogy.plugins.text.html">dialogy.plugins.text package</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.calibration.html">dialogy.plugins.text.calibration package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.canonicalization.html">dialogy.plugins.text.canonicalization package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.classification.html">dialogy.plugins.text.classification package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.duckling_plugin.html">dialogy.plugins.text.duckling_plugin package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.list_entity_plugin.html">dialogy.plugins.text.list_entity_plugin package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.merge_asr_output.html">dialogy.plugins.text.merge_asr_output package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.slot_filler.html">dialogy.plugins.text.slot_filler package</a></li>
<li class="toctree-l3"><a class="reference internal" href="dialogy.plugins.text.voting.html">dialogy.plugins.text.voting package</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="dialogy.plugins.text.html">dialogy.plugins.text package</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.calibration.html">dialogy.plugins.text.calibration package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.canonicalization.html">dialogy.plugins.text.canonicalization package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.classification.html">dialogy.plugins.text.classification package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.duckling_plugin.html">dialogy.plugins.text.duckling_plugin package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.list_entity_plugin.html">dialogy.plugins.text.list_entity_plugin package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.merge_asr_output.html">dialogy.plugins.text.merge_asr_output package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.slot_filler.html">dialogy.plugins.text.slot_filler package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.plugins.text.voting.html">dialogy.plugins.text.voting package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.calibration.html">dialogy.plugins.text.calibration package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.canonicalization.html">dialogy.plugins.text.canonicalization package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.classification.html">dialogy.plugins.text.classification package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.duckling_plugin.html">dialogy.plugins.text.duckling_plugin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.list_entity_plugin.html">dialogy.plugins.text.list_entity_plugin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.merge_asr_output.html">dialogy.plugins.text.merge_asr_output package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.slot_filler.html">dialogy.plugins.text.slot_filler package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.plugins.text.voting.html">dialogy.plugins.text.voting package</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="dialogy.types.html">dialogy.types package</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.entity.html">dialogy.types.entity package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.intent.html">dialogy.types.intent package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.plugin.html">dialogy.types.plugin package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.signal.html">dialogy.types.signal package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.slots.html">dialogy.types.slots package</a></li>
<li class="toctree-l2"><a class="reference internal" href="dialogy.types.utterances.html">dialogy.types.utterances package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.entity.html">dialogy.types.entity package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.intent.html">dialogy.types.intent package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.plugin.html">dialogy.types.plugin package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.signal.html">dialogy.types.signal package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.slots.html">dialogy.types.slots package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.types.utterances.html">dialogy.types.utterances package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.utils.html">dialogy.utils package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dialogy.workflow.html">dialogy.workflow package</a></li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <main class="main">
    <div class="content">
      <article role="main">
        <label class="toc-overlay-icon toc-content-icon" for="__toc">
          <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
        </label>
        <div class="section" id="dialogy-base-package">
<h1>dialogy.base package<a class="headerlink" href="#dialogy-base-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-dialogy.base.entity_extractor">
<span id="dialogy-base-entity-extractor-module"></span><h2>dialogy.base.entity_extractor module<a class="headerlink" href="#module-dialogy.base.entity_extractor" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="dialogy.base.entity_extractor.EntityExtractor">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">dialogy.base.entity_extractor.</span></code><code class="sig-name descname"><span class="pre">EntityExtractor</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">access</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">…</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mutate</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">…</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_column</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'alternatives'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_column</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_transform</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">threshold</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dialogy/base/entity_extractor.html#EntityExtractor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#dialogy.base.plugin.Plugin" title="dialogy.base.plugin.Plugin"><code class="xref py py-class docutils literal notranslate"><span class="pre">dialogy.base.plugin.Plugin</span></code></a></p>
<dl class="py attribute">
<dt id="dialogy.base.entity_extractor.EntityExtractor.DATETIME_OPERATION_ALIAS">
<code class="sig-name descname"><span class="pre">DATETIME_OPERATION_ALIAS</span></code><em class="property"> <span class="pre">=</span> <span class="pre">{'future':</span> <span class="pre">&lt;built-in</span> <span class="pre">function</span> <span class="pre">ge&gt;,</span> <span class="pre">'past':</span> <span class="pre">&lt;built-in</span> <span class="pre">function</span> <span class="pre">le&gt;}</span></em><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor.DATETIME_OPERATION_ALIAS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="dialogy.base.entity_extractor.EntityExtractor.FUTURE">
<code class="sig-name descname"><span class="pre">FUTURE</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'future'</span></em><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor.FUTURE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py attribute">
<dt id="dialogy.base.entity_extractor.EntityExtractor.PAST">
<code class="sig-name descname"><span class="pre">PAST</span></code><em class="property"> <span class="pre">=</span> <span class="pre">'past'</span></em><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor.PAST" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="dialogy.base.entity_extractor.EntityExtractor.aggregate_entities">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">aggregate_entities</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entity_type_value_group</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><span class="pre">dialogy.types.entity.base_entity.BaseEntity</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> → <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><span class="pre">dialogy.types.entity.base_entity.BaseEntity</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/dialogy/base/entity_extractor.html#EntityExtractor.aggregate_entities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor.aggregate_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Reduce entities sharing same type and value.</p>
<p>Entities with same type and value are considered identical even if other metadata is same.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entity_type_val_group</strong> (<em>Dict</em><em>[</em><em>Tuple</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>, </em><em>List</em><em>[</em><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><em>BaseEntity</em></a><em>]</em><em>]</em>) – A data-structure that groups entities by type and value.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of de-duplicated entities.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity">BaseEntity</a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="dialogy.base.entity_extractor.EntityExtractor.apply_filters">
<code class="sig-name descname"><span class="pre">apply_filters</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entities</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><span class="pre">dialogy.types.entity.base_entity.BaseEntity</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> → <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><span class="pre">dialogy.types.entity.base_entity.BaseEntity</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/dialogy/base/entity_extractor.html#EntityExtractor.apply_filters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor.apply_filters" title="Permalink to this definition">¶</a></dt>
<dd><p>Conditionally remove entities.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entities</strong> (<em>List</em><em>[</em><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><em>BaseEntity</em></a><em>]</em>) – A list of entities.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of entities. This can be at most the same length as <cite>entities</cite>.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity">BaseEntity</a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="dialogy.base.entity_extractor.EntityExtractor.entity_consensus">
<code class="sig-name descname"><span class="pre">entity_consensus</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entities</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><span class="pre">dialogy.types.entity.base_entity.BaseEntity</span></a><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> → <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><span class="pre">dialogy.types.entity.base_entity.BaseEntity</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/dialogy/base/entity_extractor.html#EntityExtractor.entity_consensus"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor.entity_consensus" title="Permalink to this definition">¶</a></dt>
<dd><p>Combine entities by type and value.</p>
<p>This issue:
<a class="reference external" href="https://github.com/Vernacular-ai/dialogy/issues/52">https://github.com/Vernacular-ai/dialogy/issues/52</a>
Points at the problems where we can return multiple identical entities,
depending on the number of transcripts that contain same body.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entities</strong> (<em>List</em><em>[</em><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><em>BaseEntity</em></a><em>]</em>) – A list of entities which may have duplicates.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of entities scored and unique by type and value.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity">BaseEntity</a>]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="dialogy.base.entity_extractor.EntityExtractor.entity_scoring">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">entity_scoring</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">presence</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_size</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> → <span class="pre">float</span><a class="reference internal" href="../_modules/dialogy/base/entity_extractor.html#EntityExtractor.entity_scoring"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor.entity_scoring" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>
<dl class="py method">
<dt id="dialogy.base.entity_extractor.EntityExtractor.make_transform_values">
<em class="property"><span class="pre">static</span> </em><code class="sig-name descname"><span class="pre">make_transform_values</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transcript</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> → <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/dialogy/base/entity_extractor.html#EntityExtractor.make_transform_values"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor.make_transform_values" title="Permalink to this definition">¶</a></dt>
<dd><p>Make transcripts from a string/json-string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>transcript</strong> (<em>str</em>) – A string to search entities within.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>List of transcripts.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[str]</p>
</dd>
</dl>
</dd></dl>
<dl class="py method">
<dt id="dialogy.base.entity_extractor.EntityExtractor.remove_low_scoring_entities">
<code class="sig-name descname"><span class="pre">remove_low_scoring_entities</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">entities</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><span class="pre">dialogy.types.entity.base_entity.BaseEntity</span></a><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> → <span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><span class="pre">dialogy.types.entity.base_entity.BaseEntity</span></a><span class="p"><span class="pre">]</span></span><a class="reference internal" href="../_modules/dialogy/base/entity_extractor.html#EntityExtractor.remove_low_scoring_entities"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.entity_extractor.EntityExtractor.remove_low_scoring_entities" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove entities with a lower score than the threshold.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entities</strong> (<em>List</em><em>[</em><a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity"><em>BaseEntity</em></a><em>]</em>) – A list of entities.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of entities with score higher than configured threshold.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>List[<a class="reference internal" href="dialogy.types.entity.html#dialogy.types.entity.base_entity.BaseEntity" title="dialogy.types.entity.base_entity.BaseEntity">BaseEntity</a>]</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
</div>
<div class="section" id="module-dialogy.base.plugin">
<span id="dialogy-base-plugin-module"></span><h2>dialogy.base.plugin module<a class="headerlink" href="#module-dialogy.base.plugin" title="Permalink to this headline">¶</a></h2>
<div class="section" id="writing-plugins">
<span id="plugin"></span><h3>Writing Plugins<a class="headerlink" href="#writing-plugins" title="Permalink to this headline">¶</a></h3>
<p>Plugins are an abstraction over procedures that offer a specific functionality. A plugin abstracts out the way it is fed an input, and the way its output is pushed out.
A discussion about plugins requires a bit of background about <span class="xref std std-ref">Worfklows</span>, a <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">workflow</span></a> is an ephemeral datastore. This distinction of roles
between a <a class="reference internal" href="#plugin"><span class="std std-ref">Plugin</span></a> and a <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">Workflow</span></a> is a <strong>convention</strong> to ensure that neither the <a class="reference internal" href="#plugin"><span class="std std-ref">Plugin</span></a> creation or its <em>utility</em> is constrained
by their author’s choices.</p>
<p>We will cover the following topics in this section:</p>
<ul>
<li><dl>
<dt>Plugin types</dt><dd><p>5. Are plugins trainable? if yes, how are they different from un-trained plugins?
- Base plugins.</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>The methods that one needs to implement to build a plugin.</dt><dd><ol class="arabic simple" start="7">
<li><p>Are there any conventions around methods/APIs?</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Getting inputs from a workflow.</dt><dd><ol class="arabic simple">
<li><p>[Data access](<a class="reference external" href="https://github.com/skit-ai/dialogy/blob/d688d7896226aedc7719e9b8cd2fc6b1d215ed46/dialogy/base/plugin.py#L148">https://github.com/skit-ai/dialogy/blob/d688d7896226aedc7719e9b8cd2fc6b1d215ed46/dialogy/base/plugin.py#L148</a>)</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Updating the workflow with the plugin output.</dt><dd><p>2. Who calls a plugin (API, invocation)?
2. [Workflow update](<a class="reference external" href="https://github.com/skit-ai/dialogy/blob/d688d7896226aedc7719e9b8cd2fc6b1d215ed46/dialogy/base/plugin.py#L151">https://github.com/skit-ai/dialogy/blob/d688d7896226aedc7719e9b8cd2fc6b1d215ed46/dialogy/base/plugin.py#L151</a>)
10. How do plugins interact with the workflow</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Integrating plugins with a workflow.</dt><dd><ol class="arabic simple" start="3">
<li><p><a class="reference external" href="https://github.com/skit-ai/dialogy/blob/d688d7896226aedc7719e9b8cd2fc6b1d215ed46/dialogy/workflow/workflow.py#L151">https://github.com/skit-ai/dialogy/blob/d688d7896226aedc7719e9b8cd2fc6b1d215ed46/dialogy/workflow/workflow.py#L151</a></p></li>
</ol>
</dd>
</dl>
</li>
<li><p>Workflows and plugin order of invocation</p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Transformer plugins.</p></li>
<li><dl class="simple">
<dt>Trainable plugins.</dt><dd><ol class="arabic simple">
<li><p>How to ensure continuous training/testing happens for a plugin?</p></li>
<li><p>How do I read and write my artifacts/configs?</p></li>
</ol>
</dd>
</dl>
</li>
<li><p>Workflow and plugin lifecycles.</p></li>
<li><dl class="simple">
<dt>Testing the built plugin</dt><dd><ol class="arabic simple" start="4">
<li><p>How can I test my plugin?</p></li>
</ol>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="section" id="plugin-types">
<h4>Plugin Types<a class="headerlink" href="#plugin-types" title="Permalink to this headline">¶</a></h4>
<p>There are three types of plugins:</p>
<ol class="arabic simple">
<li><p>SolitaryPlugin</p></li>
<li><p>TransformerPlugin</p></li>
<li><p>TrainablePlugin</p></li>
</ol>
<div class="section" id="solitary">
<h5>Solitary<a class="headerlink" href="#solitary" title="Permalink to this headline">¶</a></h5>
<p>A plugin that only interacts during the runtime of a <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">workflow</span></a> is called a <em>Base plugin</em>.
We can create a Base plugin like so:</p>
<div class="section" id="methods">
<h6>Methods<a class="headerlink" href="#methods" title="Permalink to this headline">¶</a></h6>
<p>The <strong>utility</strong> method describes the feature implemented by the plugin, this is the only required method for Base plugins. This method is called
during a workflow’s run. If a plugin produces a value, it can also be updated within workflow. Any kind of file reading, config parsing, model loading
should be done during the plugin’s initialization. <strong>utility</strong> methods must have fast execution times. This also means if there is any dynamic input required
by a plugin, it should be available within the <code class="code docutils literal notranslate"><span class="pre">*args</span></code>.</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">List</span>
<span class="gp">   ...: </span><span class="kn">from</span> <span class="nn">dialogy.base.plugin</span> <span class="kn">import</span> <span class="n">Plugin</span>
<span class="gp">   ...: </span><span class="kn">from</span> <span class="nn">dialogy.types</span> <span class="kn">import</span> <span class="n">PluginFn</span>
<span class="gp">   ...: </span><span class="kn">from</span> <span class="nn">dialogy.workflow</span> <span class="kn">import</span> <span class="n">Workflow</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span><span class="k">class</span> <span class="nc">ASolitaryPlugin</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">access</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginFn</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">mutate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginFn</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">   ...: </span>    <span class="p">):</span>
<span class="gp">   ...: </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">access</span><span class="o">=</span><span class="n">access</span><span class="p">,</span> <span class="n">mutate</span><span class="o">=</span><span class="n">mutate</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="nf">utility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="gp">   ...: </span>        <span class="k">return</span> <span class="kc">None</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
</div></blockquote>
<p>Let’s take an example of a plugin that concatenates the transcripts from an ASR to a <code class="code docutils literal notranslate"><span class="pre">str</span></code>.</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [2]: </span><span class="k">class</span> <span class="nc">MergeASRPlugin</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">start_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"&lt;s&gt;"</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">end_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"&lt;/s&gt;"</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">access</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginFn</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">mutate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginFn</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">   ...: </span>    <span class="p">):</span>
<span class="gp">   ...: </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">access</span><span class="o">=</span><span class="n">access</span><span class="p">,</span> <span class="n">mutate</span><span class="o">=</span><span class="n">mutate</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
<span class="gp">   ...: </span>        <span class="c1"># Always validate the input.</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">start_token</span> <span class="o">=</span> <span class="n">start_token</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">end_token</span> <span class="o">=</span> <span class="n">start_token</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="nf">utility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="gp">   ...: </span>        <span class="c1"># Always validate the input.</span>
<span class="gp">   ...: </span>        <span class="n">transcripts</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">   ...: </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_token</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">end_token</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start_token</span><span class="si">}</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">transcripts</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_token</span>
<span class="gp">   ...: </span>

<span class="gp">In [3]: </span><span class="n">MergeASRPlugin</span><span class="p">()</span><span class="o">.</span><span class="n">utility</span><span class="p">([</span><span class="s2">"hello world"</span><span class="p">,</span> <span class="s2">"hello worlds"</span><span class="p">,</span> <span class="s2">"hello word"</span><span class="p">])</span>
<span class="gh">Out[3]: </span><span class="go">'&lt;s&gt;hello world&lt;s&gt; &lt;s&gt;hello worlds&lt;s&gt; &lt;s&gt;hello word&lt;s&gt;'</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="input">
<h6>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h6>
<p>Previously we saw that the utility method produces results on expected inputs. We will now see how to get the same from a workflow.</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [4]: </span><span class="k">def</span> <span class="nf">get_classifier_input</span><span class="p">(</span><span class="n">workflow</span><span class="p">:</span> <span class="n">Workflow</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="gp">   ...: </span>    <span class="k">return</span> <span class="p">(</span><span class="n">workflow</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="s2">"transcripts"</span><span class="p">],)</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
</div></blockquote>
<p>This is an accessor function, these expect a workflow instance as their only argument and can return anything currently available.
These accessor functions are written by workflow creators and allow someone to use core plugins as long as plugins specify the input, output types.</p>
</div>
<div class="section" id="output">
<h6>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h6>
<p>Once the plugin produces an output, we may want to keep it somwhere in the workflow. In this case we rely on mutator functions to send
the plugin output back to the workflow. These are also written by workflow creators and hence any updates are plugin agnostic.</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="k">def</span> <span class="nf">set_classifier_input</span><span class="p">(</span><span class="n">workflow</span><span class="p">:</span> <span class="n">Workflow</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="gp">   ...: </span>    <span class="sd">'''</span>
<span class="gp">   ...: </span><span class="sd">    We would normally overwrite the input but since a workflow</span>
<span class="gp">   ...: </span><span class="sd">    loses inputs once run; and returns only a copy of the output,</span>
<span class="gp">   ...: </span><span class="sd">    we are creating a new key within the output.</span>
<span class="gp">   ...: </span><span class="sd">    '''</span>
<span class="gp">   ...: </span>    <span class="n">workflow</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">"transcripts"</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<span class="gp">   ...: </span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="integrations">
<h6>Integrations<a class="headerlink" href="#integrations" title="Permalink to this headline">¶</a></h6>
<p>Now we fit the pieces together and can visualize the interactions between a workflow and a plugin.</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">w</span> <span class="o">=</span> <span class="n">Workflow</span><span class="p">([</span><span class="n">MergeASRPlugin</span><span class="p">(</span><span class="n">access</span><span class="o">=</span><span class="n">get_classifier_input</span><span class="p">,</span> <span class="n">mutate</span><span class="o">=</span><span class="n">set_classifier_input</span><span class="p">)])</span>
<span class="gp">   ...: </span><span class="n">w</span><span class="o">.</span><span class="n">output</span>
<span class="gp">   ...: </span><span class="n">w</span><span class="o">.</span><span class="n">run</span><span class="p">({</span><span class="s2">"transcripts"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"hello world"</span><span class="p">,</span> <span class="s2">"hello worlds"</span><span class="p">,</span> <span class="s2">"hello word"</span><span class="p">]})</span>
<span class="gp">   ...: </span>
<span class="gh">Out[6]: </span><span class="go"></span>
<span class="go">{'intents': [],</span>
<span class="go"> 'entities': [],</span>
<span class="go"> 'transcripts': '&lt;s&gt;hello world&lt;s&gt; &lt;s&gt;hello worlds&lt;s&gt; &lt;s&gt;hello word&lt;s&gt;'}</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="transformer">
<h5>Transformer<a class="headerlink" href="#transformer" title="Permalink to this headline">¶</a></h5>
<p>Transformer plugins are solitary plugins that can additionally transform dataframes. These can be used for producing new features or modify existing ones.
If we remember the MergeASRPlugin plugin we have built so far, it does perform its transformation on a single data point expected at runtime but transformations
happen during the training phase of a workflow.</p>
<p>Let’s try to build a transformer plugin that will add a new column to a dataframe.</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [7]: </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">   ...: </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span><span class="k">class</span> <span class="nc">MergeASRPlugin</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">start_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"&lt;s&gt;"</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">end_token</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"&lt;/s&gt;"</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">access</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginFn</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">mutate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginFn</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">input_column</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"alternatives"</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">output_column</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"concat_alternatives"</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">use_transform</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">   ...: </span>    <span class="p">):</span>
<span class="gp">   ...: </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">access</span><span class="o">=</span><span class="n">access</span><span class="p">,</span> <span class="n">mutate</span><span class="o">=</span><span class="n">mutate</span><span class="p">,</span> <span class="n">input_column</span><span class="o">=</span><span class="n">input_column</span><span class="p">,</span> <span class="n">output_column</span><span class="o">=</span><span class="n">output_column</span><span class="p">,</span> <span class="n">use_transform</span><span class="o">=</span><span class="n">use_transform</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">start_token</span> <span class="o">=</span> <span class="n">start_token</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">end_token</span> <span class="o">=</span> <span class="n">start_token</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="nf">utility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="gp">   ...: </span>        <span class="n">transcripts</span> <span class="o">=</span> <span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">   ...: </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_token</span> <span class="o">+</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">end_token</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start_token</span><span class="si">}</span><span class="s2">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">transcripts</span><span class="p">)</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_token</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="nf">parse_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="gp">   ...: </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">utility</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="nf">transform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">training_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
<span class="gp">   ...: </span>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">use_transform</span><span class="p">:</span>
<span class="gp">   ...: </span>            <span class="k">return</span> <span class="n">training_data</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>        <span class="n">training_data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">output_column</span><span class="p">]</span> <span class="o">=</span> <span class="n">training_data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">input_column</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parse_value</span><span class="p">)</span>
<span class="gp">   ...: </span>        <span class="k">return</span> <span class="n">training_data</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"alternatives"</span><span class="p">:</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="s2">"hello world"</span><span class="p">,</span> <span class="s2">"helo world"</span><span class="p">]),</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="s2">"today only"</span><span class="p">,</span> <span class="s2">"today"</span><span class="p">])]})</span>
<span class="gp">   ...: </span><span class="n">MergeASRPlugin</span><span class="p">(</span><span class="n">input_column</span><span class="o">=</span><span class="s2">"alternatives"</span><span class="p">,</span> <span class="n">output_column</span><span class="o">=</span><span class="s2">"updated_alternatives"</span><span class="p">)</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gh">Out[7]: </span><span class="go"></span>
<span class="go">                    alternatives                updated_alternatives</span>
<span class="go">0  ["hello world", "helo world"]  &lt;s&gt;hello world&lt;s&gt; &lt;s&gt;helo world&lt;s&gt;</span>
<span class="go">1        ["today only", "today"]        &lt;s&gt;today only&lt;s&gt; &lt;s&gt;today&lt;s&gt;</span>
</pre></div>
</div>
</div></blockquote>
<p>and the lifecycle of its demo will be covered in a later section once we have an understanding of a trainable plugin.</p>
</div>
<div class="section" id="trainable">
<h5>Trainable<a class="headerlink" href="#trainable" title="Permalink to this headline">¶</a></h5>
<p>Trainable plugins are solitary plugins that can additionally train dataframes. A trainable plugin may optionally be able to transform dataframes as well.
Now we will build a new demo plugin that will train a classifier on a dataframe.</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="kn">import</span> <span class="nn">pickle</span>
<span class="gp">   ...: </span><span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="gp">   ...: </span><span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="kn">import</span> <span class="n">Pipeline</span>
<span class="gp">   ...: </span><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfTransformer</span>
<span class="gp">   ...: </span><span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>
<span class="gp">   ...: </span>

<span class="gp">In [9]: </span><span class="k">class</span> <span class="nc">TreeClassifierPlugin</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">access</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginFn</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">mutate</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">PluginFn</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">random_state</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">x_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"alternatives"</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">y_col</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">"intents"</span><span class="p">,</span>
<span class="gp">   ...: </span>        <span class="n">debug</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
<span class="gp">   ...: </span>    <span class="p">):</span>
<span class="gp">   ...: </span>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">access</span><span class="o">=</span><span class="n">access</span><span class="p">,</span> <span class="n">mutate</span><span class="o">=</span><span class="n">mutate</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="n">debug</span><span class="p">)</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
<span class="gp">   ...: </span>            <span class="p">(</span><span class="s1">'vect'</span><span class="p">,</span> <span class="n">CountVectorizer</span><span class="p">()),</span>
<span class="gp">   ...: </span>            <span class="p">(</span><span class="s1">'tfidf'</span><span class="p">,</span> <span class="n">TfidfTransformer</span><span class="p">()),</span>
<span class="gp">   ...: </span>            <span class="p">(</span><span class="s1">'clf'</span><span class="p">,</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="n">random_state</span><span class="p">))</span>
<span class="gp">   ...: </span>        <span class="p">])</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">x_col</span> <span class="o">=</span> <span class="n">x_col</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">y_col</span> <span class="o">=</span> <span class="n">y_col</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="nf">train</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">training_data</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
<span class="gp">   ...: </span>        <span class="n">X</span> <span class="o">=</span> <span class="n">training_data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">x_col</span><span class="p">]</span>
<span class="gp">   ...: </span>        <span class="n">y</span> <span class="o">=</span> <span class="n">training_data</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">y_col</span><span class="p">]</span>
<span class="gp">   ...: </span>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">   ...: </span>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_path</span><span class="p">,</span> <span class="s2">"wb"</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
<span class="gp">   ...: </span>            <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">handle</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="nf">load</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">   ...: </span>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">save_path</span><span class="p">,</span> <span class="s2">"rb"</span><span class="p">)</span> <span class="k">as</span> <span class="n">handle</span><span class="p">:</span>
<span class="gp">   ...: </span>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">handle</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span>    <span class="k">def</span> <span class="nf">utility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
<span class="gp">   ...: </span>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">"alternatives"</span><span class="p">:</span> <span class="p">[</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="s2">"yes"</span><span class="p">,</span> <span class="s2">"yea"</span><span class="p">]),</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">([</span><span class="s2">"no"</span><span class="p">,</span> <span class="s2">"nope"</span><span class="p">])],</span> <span class="s2">"intents"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"affirmative"</span><span class="p">,</span> <span class="s2">"negative"</span><span class="p">]})</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span><span class="k">def</span> <span class="nf">set_classifier_output</span><span class="p">(</span><span class="n">workflow</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="gp">   ...: </span>   <span class="n">workflow</span><span class="o">.</span><span class="n">output</span><span class="p">[</span><span class="s2">"intents"</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<span class="gp">   ...: </span>
<span class="gp">   ...: </span><span class="k">def</span> <span class="nf">set_classifier_input</span><span class="p">(</span><span class="n">workflow</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="gp">   ...: </span>   <span class="n">workflow</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="s2">"transcripts"</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
<span class="gp">   ...: </span>

<span class="gp">In [10]: </span><span class="n">w</span> <span class="o">=</span> <span class="n">Workflow</span><span class="p">([</span><span class="n">MergeASRPlugin</span><span class="p">(</span><span class="n">access</span><span class="o">=</span><span class="n">get_classifier_input</span><span class="p">,</span> <span class="n">mutate</span><span class="o">=</span><span class="n">set_classifier_input</span><span class="p">,</span> <span class="n">input_column</span><span class="o">=</span><span class="s2">"alternatives"</span><span class="p">,</span> <span class="n">use_transform</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">TreeClassifierPlugin</span><span class="p">(</span><span class="n">access</span><span class="o">=</span><span class="n">get_classifier_input</span><span class="p">,</span> <span class="n">mutate</span><span class="o">=</span><span class="n">set_classifier_output</span><span class="p">,</span> <span class="n">x_col</span><span class="o">=</span><span class="s2">"concat_alternatives"</span><span class="p">,</span> <span class="n">y_col</span><span class="o">=</span><span class="s2">"intents"</span><span class="p">)])</span>

<span class="gp">In [11]: </span><span class="n">w</span><span class="o">.</span><span class="n">train</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>

<span class="gp">In [12]: </span><span class="n">w</span><span class="o">.</span><span class="n">run</span><span class="p">({</span><span class="s2">"transcripts"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"yes"</span><span class="p">]})</span>
<span class="gh">Out[12]: </span><span class="go">{'intents': array(['affirmative'], dtype=object), 'entities': []}</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple" start="8">
<li><dl class="simple">
<dt>What is not a plugin?</dt><dd><ol class="arabic simple">
<li><p>Can a plugin have multiple models or is there a restriction?</p></li>
<li><p>If there are multiple models</p></li>
<li><p>If there are multiple plugins</p></li>
<li><p>Can I control the order of invocation as a plugin author?</p></li>
<li><p>Can plugins be parallelized? if the inputs are independent of other plugin outputs.</p></li>
</ol>
</dd>
</dl>
</li>
</ol>
<dl class="py class">
<dt id="dialogy.base.plugin.Plugin">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">dialogy.base.plugin.</span></code><code class="sig-name descname"><span class="pre">Plugin</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">access</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">…</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mutate</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">…</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_column</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'alternatives'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_column</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_transform</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/dialogy/base/plugin.html#Plugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.plugin.Plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>A <a class="reference internal" href="#plugin"><span class="std std-ref">Plugin</span></a> object provides utilities that perform a transformation. A <a class="reference internal" href="#plugin"><span class="std std-ref">Plugin</span></a> object differs
in behaviour depending on it’s purpose. Purpose defines stages in a <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">Workflow</span></a>’s lifecycle.
These are namely: <code class="docutils literal notranslate"><span class="pre">train</span></code>, <code class="docutils literal notranslate"><span class="pre">test</span></code> and <code class="docutils literal notranslate"><span class="pre">production</span></code>.</p>
<p>A <a class="reference internal" href="#plugin"><span class="std std-ref">Plugin</span></a> object:</p>
<ul class="simple">
<li><p>May be trained, expected during the <code class="docutils literal notranslate"><span class="pre">train</span></code> lifecycle.</p></li>
<li><p>May transform a dataframe, expected during the <code class="docutils literal notranslate"><span class="pre">test</span></code> lifecycle.</p></li>
<li><p>Transforms a datapoint, expected during the <code class="docutils literal notranslate"><span class="pre">production</span></code> lifecycle.</p></li>
</ul>
<p>Imagine a workflow processing a dataframe. Sequencing plugins like so:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start</span> <span class="o">-&gt;</span> <span class="n">A</span> <span class="o">-&gt;</span> <span class="n">B</span> <span class="o">-&gt;</span> <span class="n">C</span> <span class="o">-&gt;</span> <span class="n">D</span> <span class="o">-&gt;</span> <span class="n">end</span>
</pre></div>
</div>
<p>Let’s assume that the plugin B, and C are plugins that can transform data without any training.
However, plugins A and D require training and transform data. The data transformations differ slightly as per
the <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">workflow</span></a> life-cycle.</p>
<ol class="arabic simple">
<li><dl class="simple">
<dt>During the training phase:</dt><dd><ol class="arabic simple">
<li><p>Plugin A starts training on a dataframe and then transforms the data.</p></li>
<li><p>Plugin B, C start transforming the dataframe received from A.</p></li>
<li><p>Plugin D starts trains on the dataframe received from C.</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>During the evaluation phase:</dt><dd><ol class="arabic simple">
<li><p>Each plugin performs its own transformation and passes data ahead.</p></li>
</ol>
</dd>
</dl>
</li>
</ol>
<p>How does plugin P2 get trained if plugin P1 requires data from an incompatable dataframe?</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">start</span> <span class="o">-&gt;</span> <span class="n">P1</span> <span class="o">-&gt;</span> <span class="n">P2</span> <span class="o">-&gt;</span> <span class="n">end</span>
</pre></div>
</div>
<p>Given that the production lifecycle implies that a plugin either receives the base features
straight from the <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">Workflow</span></a> or its derivates via transformations from pre-existing plugins.</p>
<p>Therefore we can redefine incompatibility as follows:</p>
<ol class="arabic simple">
<li><p>Label differences, i.e. P1 trains on Transcription dataframes but P2 trains on Intent Classification dataframes.</p></li>
<li><p>Feature differences, i.e. P1 trains on confidence scores but P2 trains on ASR transcripts.</p></li>
</ol>
<p>Plugins require a method for validation to ensure the data they receive matches the data they are expected to process.
If the validation fails, plugins must not interrupt the training by raising exceptions.</p>
<p>Speaking from our example, P1 gets trained and P2 remaines untrained. This doesn’t sound intuitive but
that’s because we are looking at plugins within a <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">workflow</span></a>. As a remedy, <span class="xref std std-ref">plugins</span>
can be trained in isolation. A plugin author still must provide <code class="docutils literal notranslate"><span class="pre">train</span></code>, <code class="docutils literal notranslate"><span class="pre">transform</span></code> and <code class="docutils literal notranslate"><span class="pre">utility</span></code>
methods for a trainable plugin.</p>
<p><strong>Input</strong></p>
<p><a class="reference internal" href="#plugin"><span class="std std-ref">Plugin</span></a> instantiation provides the configuration but transformation is done by applying
functions on a <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">Workflow</span></a>. This way the seemingly linear sequence of plugins has the freedom to
access anything committed to the <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">Workflow</span></a>.</p>
<p><strong>Output</strong></p>
<p>Post transformation we need the plugin to commit a <code class="docutils literal notranslate"><span class="pre">value</span></code>. This value is not passed to the next plugin, instead we commit
everything to the <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">Workflow</span></a> by applying a <code class="docutils literal notranslate"><span class="pre">mutate</span></code> function with the <code class="docutils literal notranslate"><span class="pre">value</span></code> over to the <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">Workflow</span></a>.</p>
<p><strong>Trainable Plugins</strong></p>
<p>If a <a class="reference internal" href="#plugin"><span class="std std-ref">Plugin</span></a> is trainable, it must implement these methods:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">train(x:</span> <span class="pre">pd.DataFrame)</span> <span class="pre">-&gt;</span> <span class="pre">Plugin</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">utility(...)</span> <span class="pre">-&gt;</span> <span class="pre">Any</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">validate(x:</span> <span class="pre">pd.DataFrame)</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">save()</span> <span class="pre">-&gt;</span> <span class="pre">Plugin</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">load()</span> <span class="pre">-&gt;</span> <span class="pre">Plugin</span></code></p></li>
</ol>
<p><strong>Transformer Plugins</strong></p>
<p>If a <a class="reference internal" href="#plugin"><span class="std std-ref">Plugin</span></a> transforms data and produces trainable features, it must implement these methods:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">transform(x:</span> <span class="pre">pd.DataFrame)</span> <span class="pre">-&gt;</span> <span class="pre">pd.DataFrame</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">utility(...)</span> <span class="pre">-&gt;</span> <span class="pre">Any</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">validate(x:</span> <span class="pre">pd.DataFrame)</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code></p></li>
</ol>
<p><strong>Base Plugins</strong></p>
<p>If a <a class="reference internal" href="#plugin"><span class="std std-ref">Plugin</span></a> is expected to transform isolated data points (no-training, no feature generation):</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">utility(...)</span> <span class="pre">-&gt;</span> <span class="pre">Any</span></code></p></li>
</ol>
<dl class="py method">
<dt id="dialogy.base.plugin.Plugin.train">
<code class="sig-name descname"><span class="pre">train</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">_</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> → <span class="pre">Any</span><a class="reference internal" href="../_modules/dialogy/base/plugin.html#Plugin.train"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.plugin.Plugin.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Train a plugin.</p>
</dd></dl>
<dl class="py method">
<dt id="dialogy.base.plugin.Plugin.transform">
<code class="sig-name descname"><span class="pre">transform</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">training_data</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> → <span class="pre">Any</span><a class="reference internal" href="../_modules/dialogy/base/plugin.html#Plugin.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.plugin.Plugin.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform data for a plugin in the workflow.</p>
</dd></dl>
<dl class="py method">
<dt id="dialogy.base.plugin.Plugin.utility">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">utility</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span> → <span class="pre">Any</span><a class="reference internal" href="../_modules/dialogy/base/plugin.html#Plugin.utility"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#dialogy.base.plugin.Plugin.utility" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform X -&gt; y.</p>
<p>This method is called during a <a class="reference internal" href="dialogy.workflow.html#workflow"><span class="std std-ref">Workflow</span></a> run.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A value that will be passed to the next plugin (if any).</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>Any</p>
</dd>
</dl>
</dd></dl>
</dd></dl>
</div>
</div>
</div>
</div>
<div class="section" id="module-dialogy.base">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-dialogy.base" title="Permalink to this headline">¶</a></h2>
</div>
</div>

      </article>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="dialogy.cli.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">dialogy.cli package</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../index.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 
            |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            |
            <a class="muted-link" href="../_sources/source/dialogy.base.rst.txt"
               rel="nofollow">
              Show Source
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">dialogy.base package</a><ul>
<li><a class="reference internal" href="#submodules">Submodules</a></li>
<li><a class="reference internal" href="#module-dialogy.base.entity_extractor">dialogy.base.entity_extractor module</a></li>
<li><a class="reference internal" href="#module-dialogy.base.plugin">dialogy.base.plugin module</a><ul>
<li><a class="reference internal" href="#writing-plugins">Writing Plugins</a><ul>
<li><a class="reference internal" href="#plugin-types">Plugin Types</a><ul>
<li><a class="reference internal" href="#solitary">Solitary</a><ul>
<li><a class="reference internal" href="#methods">Methods</a></li>
<li><a class="reference internal" href="#input">Input</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
<li><a class="reference internal" href="#integrations">Integrations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transformer">Transformer</a></li>
<li><a class="reference internal" href="#trainable">Trainable</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-dialogy.base">Module contents</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </main>
</div>
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/main.js?digest=e931d09b2a40c1bb82b542effe772014573baf67"></script></body>
</html>